CREATE TABLE "film" (
	"film_id" INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY,
	"name" VARCHAR NOT NULL,
	"descriptions" VARCHAR NOT NULL,
	"releaseDate" DATE NOT NULL,
	"duration" INTEGER NOT NULL,
	"MPA_id" INTEGER NOT NULL,
	PRIMARY KEY("film_id")
);


CREATE TABLE "film_genre" (
	"film_id" INTEGER NOT NULL,
	"genre_id" INTEGER NOT NULL,
	PRIMARY KEY("film_id", "genre_id")
);


CREATE TABLE "genre" (
	"genre_id" INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY,
	"genre_name" VARCHAR NOT NULL,
	PRIMARY KEY("genre_id")
);


CREATE TABLE "MPArating" (
	"MPA_id" INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY,
	"MPA_name" VARCHAR NOT NULL,
	PRIMARY KEY("MPA_id")
);


CREATE TABLE "User" (
	"user_id" INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY,
	"name" VARCHAR NOT NULL,
	"login" VARCHAR NOT NULL,
	"email" VARCHAR NOT NULL,
	"birthday" DATE NOT NULL,
	PRIMARY KEY("user_id")
);


CREATE TABLE "friends" (
	"user_id" INTEGER NOT NULL,
	"friend_id" INTEGER NOT NULL,
	PRIMARY KEY("user_id", "friend_id")
);


CREATE TABLE "film_likes" (
	"film_id" INTEGER NOT NULL,
	"user_id" INTEGER NOT NULL,
	PRIMARY KEY("film_id", "user_id")
);

ALTER TABLE "film"
ADD FOREIGN KEY("MPA_id") REFERENCES "MPArating"("MPA_id")
ON UPDATE NO ACTION ON DELETE NO ACTION;
ALTER TABLE "film_genre"
ADD FOREIGN KEY("film_id") REFERENCES "film"("film_id")
ON UPDATE NO ACTION ON DELETE NO ACTION;
ALTER TABLE "film_genre"
ADD FOREIGN KEY("genre_id") REFERENCES "genre"("genre_id")
ON UPDATE NO ACTION ON DELETE NO ACTION;
ALTER TABLE "friends"
ADD FOREIGN KEY("user_id") REFERENCES "User"("user_id")
ON UPDATE NO ACTION ON DELETE NO ACTION;
ALTER TABLE "friends"
ADD FOREIGN KEY("friend_id") REFERENCES "User"("user_id")
ON UPDATE NO ACTION ON DELETE NO ACTION;
ALTER TABLE "film_likes"
ADD FOREIGN KEY("film_id") REFERENCES "film"("film_id")
ON UPDATE NO ACTION ON DELETE NO ACTION;
ALTER TABLE "film_likes"
ADD FOREIGN KEY("user_id") REFERENCES "User"("user_id")
ON UPDATE NO ACTION ON DELETE NO ACTION;